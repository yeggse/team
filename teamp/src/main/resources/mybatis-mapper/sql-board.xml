<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.BoardMapper">	
	<!-- 게시글 기본출력 -->
	<select id="firstBoardList" parameterType="hashmap" resultType="com.example.demo.model.Board">	
			SELECT 
				noticenum, nickname, startdate, title, hits
			FROM
				t3_board
			ORDER BY noticenum DESC
			LIMIT #{startNum}, #{lastNum}
	</select>
	
	<!-- 게시글 상세 출력 -->
	<select id="detailBoard" resultType="com.example.demo.model.Board">	
		SELECT 
			noticenum, nickname, startdate, title, hits, boardtype, content, creatorid
		FROM
			t3_board t
		LEFT OUTER JOIN t3_board_img i on t.noticenum = i.boardnum 
		WHERE
			t.noticenum = #{noticenum}
	</select>
	
	<!-- 게시글 수정 -->
	<update id="editBoard" parameterType="hashmap" >	
		UPDATE t3_board 
		SET
			title = #{title}, content = #{content} 
		WHERE noticenum = #{noticenum}
	</update>

	<!-- 게시글 작성 -->
	<insert id="addBoard" parameterType="hashmap" useGeneratedKeys="true" keyProperty="id" keyColumn="noticenum">	
		INSERT INTO t3_board 
			(title, content, hits, startdate, creatorid) 
		VALUES
			(#{title}, #{content}, '0', NOW() , #{userId})
	</insert>
	
	<!-- <select id="searchBoardList" parameterType="hashmap" resultType="com.example.demo.model.Board">	
		SELECT
			board_idx, title, hit_cnt, created_datetime
		FROM
			t_board
		WHERE
			deleted_yn = 'N'
		<if test='keyword != null and keyword != ""'>
			and title like concat('%', #{keyword}, '%')
		</if>
		ORDER BY board_idx DESC
	</select>
	
	
	
	
	<select id="selectBoardList2" parameterType="hashmap" resultType="com.example.demo.model.Board">	
		SELECT
			board_idx, title, hit_cnt, created_datetime, creator_id
		FROM
			t_board
		WHERE
			deleted_yn = 'N' AND creator_id = #{creator_id}
		ORDER BY board_idx DESC
	</select>
	<select id="selectResmenu" parameterType="hashmap" resultType="com.example.demo.model.Res">	
		SELECT
			*
		FROM
			t3_resmenu
		WHERE 1=1
		ORDER BY resnum DESC
	</select> -->

</mapper>