<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.ConsumerMapper">	
	<!-- 예약 내역 출력 -->
	<select id="ReserveList" parameterType="hashmap" resultType="com.example.demo.model.Consumer">	
			SELECT 
				resnum, ordernum, menuname, orderer, pickuptime, payment, price, review, salecomple, no, orderdate, menunum,resname,reskind
			FROM
				t3_reserve
			where orderer = #{id} AND salecomple = "N"
			ORDER BY orderdate DESC
			LIMIT #{startNum}, #{lastNum}
			
	</select>	
	
		<!-- 리뷰 이미지 추가 -->
	<insert id="insertReviewImg" parameterType="hashmap">	
		INSERT INTO t3_review_img
			(reviewnum, img)  
		VALUES
			(#{reviewnum}, #{img})
	</insert>
	
	<!-- 리뷰 수정 
	<update id="editReview" parameterType="hashmap" >	
		UPDATE t3_review 
		SET
			title = #{title}, content = #{content} 
		WHERE number = #{number}
	</update> -->
	
	<!-- 리뷰작성 작성 -->
	<insert id="addReview" parameterType="hashmap" useGeneratedKeys="true" keyProperty="reviewnum" keyColumn="reviewnum">	
		INSERT INTO t3_review 
			( categori, resnum, writedate, content, grade, nickname, reskind, title, create_id )  
		VALUES
			(#{reskind},  #{resnum}, NOW() , #{content}, #{grade}, #{nickname}, #{reskind}, #{title}, #{userId})
	</insert>
	
	
	

</mapper>